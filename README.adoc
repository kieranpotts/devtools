= ðŸ”’ Tools

This is a repository of binaries and configurations for my personal development environment.

This repository is maintained to facilitate the backing up and restoration of my local development environment configuration, and to ease the synchronization and porting of my development tools between different computers.

This repository includes the following:

- Terminal customization using https://ohmyposh.dev/[Oh-My-Posh]
- Binaries for command line utilities like https://github.com/jesseduffield/lazygit[lazygit]
- Windows Terminal startup batch script
- VS Code user-level settings including theme and keybindings
- VS Code workspace configuration files

This a private repository but the configurations compliment my public https://github.com/kieranpotts/dotfiles[dotfiles].

== Documentation

=== Requirements

This repository encapsulates configuration for the following tools, which SHOULD be pre-installed on the local filesystem. All are OPTIONAL.

- https://github.com/dandavison/delta[Delta]
- https://git-scm.com/[Git]
- https://github.com/jesseduffield/lazygit#installation[LazyGit]
- https://ohmyposh.dev/[Oh-My-Posh]
- https://www.sublimemerge.com/[Sublime Merge]
- https://code.visualstudio.com/[Visual Studio Code]
- https://github.com/microsoft/terminal[Windows Terminal]

Windows binaries for `delta`, `lazygit` and `oh-my-posh` are included in this repository. These can be enabled simply by adding this repository's `bin` directory to your system's `PATH` environment variable. Fresh binaries can be downloaded for these programs from the following links.

* https://github.com/dandavison/delta/releases
* https://github.com/jesseduffield/lazygit/releases
* https://github.com/JanDeDobbeleer/oh-my-posh/releases

All other programs MUST be installed manually.

=== Installation

`git clone` this repository to a local directory called `personal/tools`, then follow the steps below.

==== 1. Install the fonts

The configurations for VS Code and Windows Terminal depend on the following fonts being installed locally:

* Hack
* Hack Nerd Font

Hack is a programming font. It adds special ligatures that merge multiple consecutive characters into a single composite glyph, for example `>=` is presented as `â‰¥` and `!=` as `â‰ `, improving readability without changing the code. Hack NF (Nerd Font) is a version of the same font extended with additional glyphs that are used to create visual design effects like icons and rounded corners in a shell's prompt line.

Both these fonts are included in the `./vendor/fonts` directory and need to be installed manually.

==== 2. Create symlinks to the configuration files

Configuration files are included for various development tools, including Visual Studio Code and Windows Terminal, for easy portability between machines.

To use these configuration, you will need to create symlinks to them. On Windows, run Windows Powershell in administrator mode and execute the following commands, changing the filesystem paths as required.

.Windows
[source,powershell]
----
# LazyGit
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\AppData\Roaming\lazygit\config.yml" -Target "C:\path\to\tools\etc\lazygit\config.yml" -Force

# Sublime Merge
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\AppData\Roaming\Sublime Merge\Packages\User\Preferences.sublime-settings" -Target "C:\path\to\tools\etc\sublime-merge\Preferences.sublime-settings" -Force

# Visual Studio Code
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\AppData\Roaming\Code\User\settings.json" -Target "C:\path\to\tools\etc\vscode\settings.json" -Force
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\AppData\Roaming\Code\User\keybindings.json" -Target "C:\path\to\tools\etc\vscode\keybindings.json" -Force
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\AppData\Roaming\Code\User\snippets\global.code-snippets" -Target "C:\path\to\tools\etc\vscode\global.code-snippets" -Force

# Windows Terminal
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\AppData\Local\Packages\Microsoft.WindowsTerminal_[hash]\LocalState\settings.json" -Target "C:\path\to\tools\etc\wt\settings.json" -Force
----

.Unix-like systems
[source,sh]
----
# Visual Studio Code
ln --symbolic --force path/to/tools/etc/vscode/settings.json ~/.config/Code/User/settings.json
ln --symbolic --force path/to/tools/etc/vscode/keybindings.json ~/.config/Code/User/keybindings.json
ln --symbolic --force path/to/tools/etc/vscode/global.code-snippets ~/.config/Code/User/snippets/global.code-snippets
----

////
TODO: Edit config for Sublime Merge
TODO: Edit config for Sublime Text
////

==== 3. Enable the shell theme

The process for enabling the custom Oh-My-Posh theme is different. First, create a link to the `etc/oh-my-posh` directory from `~/oh-my-posh` in the home directory of your system user. On Windows, use Powershell running with administrator privileges.

[source,powershell]
----
New-Item -ItemType SymbolicLink -Path "C:\Users\[User]\oh-my-posh" -Target "C:\path\to\tools\etc\oh-my-posh" -Force
----

[source,sh]
----
ln --symbolic --force path/to/tools/etc/oh-my-posh ~/oh-my-posh
----

Next, add the following to your `.bash_profile`. Use the `local.bash_profile` file installed from the https://github.com/kieranpotts/dotfiles[dotfiles repo]:

[source,sh]
----
# Start Oh My Posh and load your preferred prompt theme.
#
# Errors are redirected to standard error because `oh-my-posh` is an optional
# dependency, so we don't want to assume it is installed.
#
# Documentation:
# https://ohmyposh.dev/
#
eval "$(oh-my-posh init bash --config ~/oh-my-posh/themes/hacks.omp.json 2> /dev/null)"
----

The Hacks theme is a custom fork of the popular Agnoster theme, which is included with Oh-My-Posh. You can change the `--config` parameter to load different themes for your shell's prompt line. More themes can be installed by running the commands below.

[source,sh]
----
mkdir [path/to/install/dir]
cd [path/to/install/dir]
wget https://github.com/JanDeDobbeleer/oh-my-posh/releases/latest/download/themes.zip -O themes.zip
unzip themes.zip
chmod u+rw *.json
rm themes.zip
----

NOTE: `wget` is not pre-installed in the Git Bash emulator. Download the https://eternallybored.org/misc/wget/[binary from here]

Oh My Posh is highly customizable. See https://ohmyposh.dev/docs/[the website] for more options. As a cross-platform framework, configurations can be shared between shells. So you can expose your Powershell, Git Bash and WSL environments to the same configuration, ensuring a consistent prompt in every shell environment running in every terminal program.

////
TODO: Add docs for configuring WSL.
TODO: Add docs for configuring PowerShell, eg to use same Oh-My-Posh config
////

==== 4. GitHub Codespaces configuration (optional step)

Go to your https://github.com/settings/codespaces[GitHub Codespaces options] and enable the following setting. This will use your VS Code Settings in GitHub Codespaces.

image::github-enable-settings-sync.png[]

=== Run scripts

The contents of the `run` directory contain various scripts and configurations to automate the management of the local development environment. The run scripts are:

* `install.sh`: Bash script to automatically clone all code repositories.
* `sync.sh`: Bash script to automatically synchronize the main branches of all local repositories with their tracked upstream branches.
* `personal.code-workspace`: Workspace configuration for all code repositories.
* `wt.bat`: Startup script for Windows Terminal, loads pre-configured tabs.

''''

Copyright Â© 2020-2023 Kieran Potts â€“ All rights reserved

The executable binaries redistributed via this repository are copyright their respective authors and may be subject to alternative free and open source software licenses.
